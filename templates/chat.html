{% extends "base.html" %}
{% block title %}Chat de la session{% endblock %}
{% block content %}

<h2>Chat pour la session n°{{ session_id }}</h2>

<!-- Affiche les messages -->
{% if messages %}
  {% for msg in messages %}
    <div class="card mb-2">
      <div class="card-body">
        <strong>{{ msg.user_name }}</strong> :
        <p>{{ msg.content }}</p>
        <small>{{ msg.created_at }}</small>
      </div>
    </div>
  {% endfor %}
{% else %}
  <p>Aucun message pour le moment.</p>
{% endif %}

<!-- Formulaire d’envoi -->
<form action="{{ url_for('add_chat_message') }}" method="POST" class="mt-4">
  <input type="hidden" name="session_id" value="{{ session_id }}">
  <div class="mb-3">
    <label for="content" class="form-label">Message :</label>
    <textarea class="form-control" id="content" name="content" rows="3" required></textarea>
  </div>
  <button type="submit" class="btn btn-primary">Envoyer</button>
</form>

{% endblock %}

